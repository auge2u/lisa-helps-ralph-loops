{
  "$schema": "semantic-memory-v1",
  "project": {
    "name": "lisa",
    "display_name": "Lisa - Staged Migration System for Gastown",
    "type": "claude-code-plugin",
    "primary_language": "Python",
    "version": "0.3.0",
    "description": "Staged migration system that analyzes codebases, extracts work items as Beads, bundles them into Convoys, and generates .gt/ directory structure for multi-agent execution via Gastown.",
    "repository": "https://github.com/auge2u/lisa-helps-ralph-loops",
    "license": "MIT",
    "status": "alpha",
    "category": "productivity",
    "keywords": ["gastown", "migration", "multi-agent", "beads", "convoys", "roadmap", "rescue", "semantic-memory"]
  },
  "tech_stack": {
    "runtime": "Python 3.10+",
    "primary_dependency": "PyYAML (optional — fallback mode without it)",
    "testing": "pytest (pytest -v, 25 tests)",
    "validation": "validate.py (834 lines, loads gates.yaml, PyYAML-free fallback mode)",
    "output_format": "JSON (.gt/ state files) + Markdown (scopecraft/)",
    "versioning": "scripts/bump-version.sh (syncs plugin.json + marketplace.json + CHANGELOG.md)"
  },
  "ecosystem_role": {
    "role": "pipeline-and-memory",
    "description": "Owns the staged pipeline (research, discover, plan, structure, reconcile) and the .gt/ directory schema. Ecosystem root for reconciliation.",
    "reads_from": [
      "target project files (package.json, README.md, docs/, etc.)",
      "carlos/.gt/memory/semantic.json (for reconcile)",
      "conductor/.gt/memory/semantic.json (for reconcile)",
      "~/.lisa/ecosystem.json (ecosystem-config-v2, project paths + git remotes for reconcile)"
    ],
    "writes_to": [
      ".gt/research/ (stage 0)",
      ".gt/memory/ (stage 1)",
      "scopecraft/ (stage 2)",
      ".gt/beads/ (stage 3)",
      ".gt/convoys/ (stage 3)",
      "scopecraft/.checkpoint.json (reconcile)",
      "scopecraft/ALIGNMENT_REPORT.md (reconcile)",
      "scopecraft/PERSPECTIVES.md (reconcile)"
    ],
    "does_not_own": [
      "Carlos analysis reports",
      "Conductor state (task queue, file locks, agent lifecycle)"
    ],
    "standalone": true,
    "standalone_command": "/lisa:migrate",
    "ecosystem_root": "this repo (hosts reconcile and ecosystem scopecraft/)"
  },
  "capabilities": {
    "commands": [
      {"name": "/lisa:research", "purpose": "Stage 0: Archaeological rescue for abandoned projects", "stage": 0},
      {"name": "/lisa:discover", "purpose": "Stage 1: Extract semantic memory from project analysis", "stage": 1},
      {"name": "/lisa:plan", "purpose": "Stage 2: Generate roadmap with epics, risks, metrics", "stage": 2},
      {"name": "/lisa:structure", "purpose": "Stage 3: Create Beads and Convoys for Gastown", "stage": 3},
      {"name": "/lisa:status", "purpose": "Show migration progress and quality gate results"},
      {"name": "/lisa:migrate", "purpose": "Composite: stages 1-3 (discover + plan + structure)"},
      {"name": "/lisa:rescue", "purpose": "Composite: stages 0-3 (research + discover + plan + structure)"},
      {"name": "/lisa:reconcile", "purpose": "Stage 5: Cross-project alignment report and checkpoint", "stage": 5}
    ],
    "agents": [
      {"name": "archaeologist", "role": "Archaeological rescue specialist", "stage": 0},
      {"name": "migrator", "role": "Project migration specialist", "stages": [1, 2, 3, 5]}
    ],
    "skills": [
      {"name": "research", "purpose": "Git archaeology, timeline, mission extraction"},
      {"name": "discover", "purpose": "Tech stack detection, semantic memory generation"},
      {"name": "plan", "purpose": "Roadmap generation with templates"},
      {"name": "structure", "purpose": "Bead extraction and convoy bundling"},
      {"name": "reconcile", "purpose": "Cross-project ecosystem alignment and drift detection"}
    ],
    "quality_gates": 31,
    "gate_stages": ["research", "discover", "plan", "structure", "reconcile"],
    "gate_source": "gates.yaml v1.1 (declarative, single source of truth)"
  },
  "validation": {
    "validator": "plugins/lisa/hooks/validate.py",
    "lines_of_code": 834,
    "gates_config": "plugins/lisa/gates.yaml (v1.1, 31 gates, 5 stages)",
    "pyyaml_fallback": true,
    "fallback_description": "When PyYAML is not installed, validate.py runs in fallback mode using built-in subset of gates (file_exists, file_count, json_valid, json_field_present, json_field_count). Pattern-based checks skipped with warning.",
    "check_types": ["file_exists", "file_count", "json_valid", "json_field_present", "json_field_count", "pattern_exists", "pattern_count", "cross_reference"],
    "exit_codes": {"pass": 0, "blocker_failed": 1, "warning_failed": 2, "security_error": 3},
    "path_security": "All validated paths must resolve within working directory. Allowed: ., .gt, scopecraft"
  },
  "reconcile": {
    "ecosystem_config": "~/.lisa/ecosystem.json (ecosystem-config-v2)",
    "ecosystem_config_v2_features": ["remote field per project (git remote URL)", "backward compatible with v1"],
    "standalone_mode": "Works with 0-1 projects when ecosystem.json missing or single-project",
    "incremental_mode": "Compares git hashes from prior checkpoint; skips unchanged projects",
    "git_remote_fallback": "When path not found, tries matching git remote get-url origin",
    "checkpoint_schema": "reconcile-checkpoint-v1 (plugins/lisa/skills/reconcile/checkpoint-schema.json)",
    "checkpoint_fields": ["git_hash per project", "remote URL per project", "scan_mode (full/incremental/cached)"],
    "output_templates": 3,
    "quality_gates": 9,
    "graceful_degradation": "Missing partners produce informational message, not error"
  },
  "pipeline": {
    "stages": [
      {"number": 0, "name": "research", "output": ".gt/research/", "agent": "archaeologist"},
      {"number": 1, "name": "discover", "output": ".gt/memory/", "agent": "migrator"},
      {"number": 2, "name": "plan", "output": "scopecraft/", "agent": "migrator"},
      {"number": 3, "name": "structure", "output": ".gt/beads/, .gt/convoys/", "agent": "migrator"},
      {"number": 5, "name": "reconcile", "output": "scopecraft/ (alignment)", "agent": "migrator"}
    ],
    "workflows": {
      "migrate": ["discover", "plan", "structure"],
      "rescue": ["research", "discover", "plan", "structure"],
      "ecosystem": ["reconcile"]
    }
  },
  "documentation": {
    "readme": "README.md (rewritten for v0.3.0, install + commands + output structure + ecosystem)",
    "changelog": "CHANGELOG.md (v0.1.0, v0.2.0, v0.3.0 with added/changed/deprecated/breaking)",
    "getting_started": "docs/GETTING_STARTED.md (install to first output in 15 minutes)",
    "architecture": "docs/ARCHITECTURE_V2.md (5-stage pipeline design)",
    "claude_md": "CLAUDE.md (development commands, architecture, file relationships)"
  },
  "plugin_structure": {
    "active_plugin": "plugins/lisa/ (v0.3.0)",
    "deprecated_plugin": "plugins/lisa-loops-memory/ (v0.2.0, DEPRECATED.md with migration table)",
    "marketplace_registry": ".claude-plugin/marketplace.json (lists both, deprecated flag on legacy)",
    "commands": 8,
    "deprecated_commands": 6,
    "skill_files": 5,
    "template_dirs": 5,
    "total_plugin_files": 39
  },
  "gastown_concepts": {
    "bead": "Work item with ID gt-xxxxx, acceptance criteria, evidence",
    "convoy": "Bundle of 3-7 related beads for assignment (eco-convoy-NNN for ecosystem, convoy-NNN for project)",
    "memory": "Semantic (facts), episodic (decisions), procedural (patterns)"
  },
  "personas": [
    {"name": "Solo developer with abandoned projects", "need": "Context recovery and structured work extraction", "priority": 1},
    {"name": "Small team migrating to multi-agent", "need": "Structured work items for Gastown execution", "priority": 1},
    {"name": "Ecosystem operator", "need": "Cross-project alignment and drift detection", "priority": 2}
  ],
  "constraints": [
    "Works offline after initial clone",
    "All outputs are local files (no database required)",
    "Python 3.10+ (PyYAML optional — fallback mode available)",
    "Plugins must degrade gracefully when ecosystem partners are absent",
    "Allowed output directories: ., .gt, scopecraft (enforced by validate.py)"
  ],
  "non_goals": [
    "Specialist analysis (Carlos's job)",
    "Multi-agent tracking and orchestration (Conductor's job)",
    "Model routing or cost optimization (Carlos/Conductor)",
    "Web UI or dashboard"
  ],
  "integration_points": {
    "carlos": {
      "provides": ".gt/memory/semantic.json (discovery output), gates.yaml (quality gate schema), scopecraft/ format",
      "receives": "Richer analysis reports, quality gate enforcement, market fit scoring"
    },
    "conductor": {
      "provides": ".gt/beads/*.json, .gt/convoys/*.json (structured work items)",
      "receives": "Task assignment, agent lifecycle management, context rollover"
    }
  },
  "evidence": {
    "last_scan": "2026-02-10T15:00:00Z",
    "files_analyzed": [
      "README.md",
      "CHANGELOG.md",
      "CLAUDE.md",
      "docs/GETTING_STARTED.md",
      "docs/ARCHITECTURE_V2.md",
      "plugins/lisa/.claude-plugin/plugin.json",
      ".claude-plugin/marketplace.json",
      "plugins/lisa/gates.yaml",
      "plugins/lisa/hooks/validate.py",
      "plugins/lisa/commands/discover.md",
      "plugins/lisa/commands/plan.md",
      "plugins/lisa/commands/research.md",
      "plugins/lisa/commands/structure.md",
      "plugins/lisa/commands/status.md",
      "plugins/lisa/commands/migrate.md",
      "plugins/lisa/commands/rescue.md",
      "plugins/lisa/commands/reconcile.md",
      "plugins/lisa/agents/archaeologist.md",
      "plugins/lisa/agents/migrator.md",
      "plugins/lisa/skills/discover/SKILL.md",
      "plugins/lisa/skills/plan/SKILL.md",
      "plugins/lisa/skills/research/SKILL.md",
      "plugins/lisa/skills/structure/SKILL.md",
      "plugins/lisa/skills/reconcile/SKILL.md",
      "plugins/lisa/skills/reconcile/checkpoint-schema.json",
      "plugins/lisa/skills/reconcile/templates/ALIGNMENT_REPORT_FORMAT.md",
      "plugins/lisa/skills/reconcile/templates/PERSPECTIVES_FORMAT.md",
      "plugins/lisa/skills/reconcile/templates/CHECKPOINT_FORMAT.json",
      "plugins/lisa/skills/plan/templates/VISION_FORMAT.md",
      "plugins/lisa/skills/plan/templates/ROADMAP_FORMAT.md",
      "plugins/lisa/skills/plan/templates/EPICS_FORMAT.md",
      "plugins/lisa/skills/plan/templates/RISK_REGISTER_FORMAT.md",
      "plugins/lisa/skills/plan/templates/METRICS_FORMAT.md",
      "plugins/lisa/skills/plan/templates/OPEN_QUESTIONS_FORMAT.md",
      "plugins/lisa-loops-memory/DEPRECATED.md",
      "tests/test_validate_quality_gates.py",
      "scripts/bump-version.sh",
      "~/.lisa/ecosystem.json",
      "scopecraft/.checkpoint.json",
      "scopecraft/ALIGNMENT_REPORT.md",
      "scopecraft/PERSPECTIVES.md"
    ],
    "previous_scan": "2026-02-08T19:00:00Z (v0.3.0, 31 gates, pre-Phase-4-6)",
    "delta_since_previous": "Phase 4-6 implementation: README rewritten, CHANGELOG v0.3.0 added, docs/GETTING_STARTED.md created, validate.py PyYAML fallback mode (834 lines), reconcile SKILL.md standalone/incremental/git-remote modes, checkpoint-schema.json +git_hash/remote/scan_mode, ecosystem.json → v2 schema (remote field), plugin.json +category/keywords/email, DEPRECATED.md for legacy plugin, reconcile v5.0.0 (26 alignments, 0 misalignments, 2 LOW gaps). 4 new commits (00aeade through 62e3fde)."
  }
}
